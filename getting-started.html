
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Getting started &#8212; job-dispatcher docs</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="JobDispatcher User Guide" href="user-guide/intro.html" />
    <link rel="prev" title="JobDispatcher Docs" href="intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="intro.html">
  <img src="_static/logo.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="user-guide/intro.html">
  JobDispatcher User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="api-reference.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="contributors-guide.html">
  Contributors guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="release-notes.html">
  Some release notes
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#library-purpose">
   Library purpose
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#my-first-job">
   My first job
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jobs-with-arguments-and-retrieving-results">
   Jobs with arguments and retrieving results
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-multiple-jobs">
   Running multiple jobs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#requesting-cores">
   Requesting cores
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h1>
<p>Welcome to the introduction to Jobdispatcher! In this page you will find all the information to get you started and launch your first batch of parallel jobs.</p>
<p>This introduction will be structured as follows:</p>
<ol class="simple">
<li><p><a class="reference external" href="#library-purpose">Library purpose</a></p></li>
<li><p><a class="reference external" href="#installation">Installation</a></p></li>
<li><p><a class="reference external" href="#my-first-job">My first job</a></p></li>
<li><p><a class="reference external" href="#jobs-with-arguments-and-retrieving-results">Jobs with arguments and retrieving results</a></p></li>
<li><p><a class="reference external" href="#running-multiple-jobs">Running multiple jobs</a></p></li>
<li><p><a class="reference external" href="#requesting-cores">Requesting cores</a></p></li>
</ol>
<section id="library-purpose">
<h2>Library purpose<a class="headerlink" href="#library-purpose" title="Permalink to this heading">#</a></h2>
<p>JobDispatcher allows the user to easily execute several functions in a parallel fashion without the trouble of writing multiprocessing or threading code
and taking care of the available resources on the system.</p>
<p>It’s ideal use case is e.g. running a batch of independent OpenMP executables. The user can then simply define functions that launch
the executables with appropriate inputs and provide them to JobDispatcher. Then, JobDispatcher will make sure that enough concurrent jobs are running
at all time to fully exploit the available system resources. If resources are freed due to completed jobs, new jobs that fit the available resources
will be launched automatically until all jobs are completed.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h2>
<p>The easiest way to install the latest release of JobDispatcher is through the conda package manager:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c greenenergystorage job-dispatcher
</pre></div>
</div>
</section>
<section id="my-first-job">
<h2>My first job<a class="headerlink" href="#my-first-job" title="Permalink to this heading">#</a></h2>
<p>In order to run your first job, first import the library in your python script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jobdispatcher</span> <span class="k">as</span> <span class="nn">jd</span>
</pre></div>
</div>
<p>JobDispatcher relies on the creation of Job objects which allow to define the job name and the function to be executed. In this minimal example we will not request a specific number of cores, therefore the Job will use only one core.</p>
<p>Lets then create our first Job:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is my first job&quot;</span><span class="p">)</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">jd</span><span class="o">.</span><span class="n">Job</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first_job&quot;</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="n">my_function</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, we need to assign the Job to JobDispatcher and invoke the <code class="docutils literal notranslate"><span class="pre">run</span></code> method. In this easy example, we will perform the assignment at the initialization of the JobDispatcher instance by providing to the constructor the job instance, but more advanced assigment methods are available in the <a class="reference internal" href="user-guide/intro.html"><span class="doc std std-doc">User Guide</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dispatcher</span> <span class="o">=</span> <span class="n">jd</span><span class="o">.</span><span class="n">JobDispatcher</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
<span class="n">dispatcher</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>This should print “This is my first job” to the screen.</p>
</section>
<section id="jobs-with-arguments-and-retrieving-results">
<h2>Jobs with arguments and retrieving results<a class="headerlink" href="#jobs-with-arguments-and-retrieving-results" title="Permalink to this heading">#</a></h2>
<p>You can also create Jobs for functions that accept positional and keyword arguments. Here we show a simple example with positional arguments, while a more complete
explanation can be found in the <a class="reference internal" href="user-guide/intro.html"><span class="doc std std-doc">User Guide</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">a</span><span class="o">*</span><span class="mi">2</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">jd</span><span class="o">.</span><span class="n">Job</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first job&quot;</span><span class="p">,</span> 
		 <span class="n">function</span><span class="o">=</span><span class="n">my_function</span><span class="p">,</span>  	    
 	     <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>If the function has a return value, JobDispatcher’s <code class="docutils literal notranslate"><span class="pre">.run()</span></code> function will return a dictionary whose entry has the job name as a key and the function result as value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dispatcher</span> <span class="o">=</span> <span class="n">jd</span><span class="o">.</span><span class="n">JobDispatcher</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dispatcher</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>	
</pre></div>
</div>
</section>
<section id="running-multiple-jobs">
<h2>Running multiple jobs<a class="headerlink" href="#running-multiple-jobs" title="Permalink to this heading">#</a></h2>
<p>The main purpose of JobDispatcher is to help the user to run multiple jobs in an automated fashion without worrying about how many concurrent jobs can be run on a given system. By default, JobDispatcher allocates 1 core for each Job and determines the number of available cores from a <code class="docutils literal notranslate"><span class="pre">os.sched_getaffinity(0)</span></code> call to the system.</p>
<p>In the following short example we will generate random numbers in different processes. To do so, we will provide multiple Job objects to JobDispatcher:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jobdispatcher</span> <span class="k">as</span> <span class="nn">jd</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>

<span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
	<span class="k">return</span> <span class="n">random</span><span class="p">()</span>

<span class="c1"># Create some functions and assign them to Job objects</span>
<span class="n">jobs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
	<span class="n">job</span> <span class="o">=</span> <span class="n">jd</span><span class="o">.</span><span class="n">Job</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Job </span><span class="si">{</span><span class="n">number</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="n">my_function</span><span class="p">)</span>
	
	<span class="n">jobs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>

<span class="c1"># Run the provided jobs!</span>
<span class="n">dispatcher</span> <span class="o">=</span> <span class="n">jd</span><span class="o">.</span><span class="n">JobDispatcher</span><span class="p">(</span><span class="n">jobs</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dispatcher</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

</pre></div>
</div>
<p>Once the jobs are completed, the functions results are collected in the returned <code class="docutils literal notranslate"><span class="pre">results</span></code> dictionary</p>
</section>
<section id="requesting-cores">
<h2>Requesting cores<a class="headerlink" href="#requesting-cores" title="Permalink to this heading">#</a></h2>
<p>When creating a Job object, you can specify the required number of cores as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jobdispatcher</span> <span class="k">as</span> <span class="nn">jd</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>

<span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
	<span class="k">return</span> <span class="n">random</span><span class="p">()</span>

<span class="c1"># Create some functions and assign them to Job objects</span>
<span class="n">jobs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
	<span class="n">job</span> <span class="o">=</span> <span class="n">jd</span><span class="o">.</span><span class="n">Job</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Job </span><span class="si">{</span><span class="n">number</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="n">my_function</span><span class="p">,</span> <span class="n">cores</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
	
	<span class="n">jobs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also specify the maximum number of cores that will be used by JobDispatcher:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the provided jobs!</span>
<span class="n">dispatcher</span> <span class="o">=</span> <span class="n">jd</span><span class="o">.</span><span class="n">JobDispatcher</span><span class="p">(</span><span class="n">jobs</span><span class="p">,</span> <span class="n">maxcores</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">dispatcher</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>More advanced uses of JobDispatcher are detailed in the <a class="reference internal" href="user-guide/intro.html"><span class="doc std std-doc">User Guide</span></a>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">JobDispatcher Docs</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="user-guide/intro.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">JobDispatcher User Guide</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.2.3.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>